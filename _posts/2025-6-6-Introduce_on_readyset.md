---
layout: post
category: OpenSource    
title: ReadySet 
tagline: by Pigbrain  
tags: [OpenSource]  
---

<!--more-->


### Intro
애플리케이션 개발자라면 누구나 한 번쯤 데이터베이스 성능 문제로 골머리를 앓아본 경험이 있을 겁니다.  
  
특히 사용자가 많아지고 데이터량이 증가하면서 쿼리 응답 속도가 느려지는 현상은 서비스 품질 저하로 직결될 수 있죠.  
  
이러한 문제에 대한 효과적인 솔루션 중 하나가 바로 ReadySet입니다.
  
<br>

### ReadySet이란 무엇인가?
ReadySet은 SQL 쿼리 캐싱 및 최적화를 위한 실시간 데이터베이스 캐싱 레이어입니다.   
  
쉽게 말해, 데이터베이스 앞에 위치하여 자주 실행되는 쿼리의 결과를 미리 저장해두고, 동일한 쿼리가 다시 요청될 경우 데이터베이스까지 가지 않고 캐시된 결과를 바로 반환하여 응답 속도를 획기적으로 개선하는 역할을 합니다.  


<br>

### ReadySet을 왜 사용하는가?
* 성능 향상  
  * 가장 큰 장점은 물론 성능 향상입니다  
  * 반복되는 읽기 쿼리에 대한 응답 시간을 극적으로 단축시켜 사용자 경험을 개선하고, 데이터베이스 서버의 부하를 줄여줍니다.  

* 개발 편의성  
  * 기존 애플리케이션 코드를 거의 수정할 필요 없이 ReadySet을 도입할 수 있습니다.  
  * ReadySet은 PostgreSQL 및 MySQL과 같은 관계형 데이터베이스와 호환되며, 기존 드라이버를 그대로 사용할 수 있어 개발자가 새로운 캐싱 로직을 직접 구현할 필요가 없습니다.  

* 확장성  
  * 애플리케이션의 트래픽이 증가하더라도 ReadySet을 통해 데이터베이스의 부하를 분산시키고 안정적으로 서비스를 운영할 수 있습니다.  
  
* 비용 절감  
  * 데이터베이스 서버의 부하가 줄어들면 더 적은 리소스로도 동일한 성능을 유지할 수 있어 운영 비용 절감 효과를 기대할 수 있습니다.  

<br>

> 분석 대시보드, 전자상거래 웹사이트, 고성능 API 등 읽기 중심의 워크로드가 많은 애플리케이션에서 ReadySet은 빛을 발합니다.

<br>
  

### ReadySet의 아키텍처 

* 캐싱 레이어 (Caching Layer)
  * ReadySet의 핵심으로, 데이터베이스 쿼리의 결과를 저장하고 관리합니다.  
  * 캐싱된 데이터는 메모리에 저장되어 빠른 접근이 가능하며, 캐시 무효화(Cache Invalidation)를 통해 데이터 일관성을 유지합니다.  
   
* 쿼리 최적화 엔진 (Query Optimization Engine) . 
  * 들어오는 SQL 쿼리를 분석하고, 해당 쿼리가 캐싱될 수 있는지, 그리고 어떻게 최적화될 수 있는지를 판단합니다. 이는 실행 계획 분석 등을 통해 이루어집니다.

* 데이터베이스 커넥터 (Database Connector)
  * ReadySet과 실제 데이터베이스(예: PostgreSQL, MySQL) 간의 연결을 담당합니다.  
  * 데이터베이스의 변경 사항을 모니터링하여 캐시된 데이터의 최신성을 보장합니다.  
  
* CDC (Change Data Capture)
  * ReadySet의 가장 강력한 기능 중 하나는 **CDC(Change Data Capture)**를 활용하여 캐시된 데이터의 정합성을 실시간으로 보장한다는 점입니다. 이는 단순히 일정 시간마다 캐시를 무효화하는 방식(TTL)과는 차원이 다릅니다.
  
  * ReadySet은 원본 데이터베이스(PostgreSQL, MySQL 등)의 **트랜잭션 로그(Transaction Log) 또는 바이너리 로그(Binary Log)**에 직접 접근하여 데이터 변경 사항을 실시간으로 스트리밍 받습니다.

    * 로그 기반 감지
      * 데이터베이스에 새로운 데이터가 삽입되거나(INSERT), 기존 데이터가 수정되거나(UPDATE), 삭제될 때(DELETE)마다 해당 변경 내용은 트랜잭션 로그에 기록됩니다.  
      * ReadySet은 이 로그를 지속적으로 모니터링하고 분석하여 어떤 테이블의 어떤 행에 어떤 종류의 변경이 발생했는지 정확하게 파악합니다.  

    * 정교한 캐시 무효화 및 업데이트  
      * 변경된 데이터와 관련된 캐시된 쿼리 결과만을 선택적으로 무효화하거나, 심지어 캐시된 뷰를 업데이트하는 방식으로 캐시를 최신 상태로 유지합니다.  
      * 예를 들어, `SELECT * FROM products WHERE category = 'electronics'`라는 쿼리의 결과가 캐시되어 있다고 가정해봅시다. 만약 products 테이블에서 category가 'electronics'인 특정 상품의 가격이 변경된다면, ReadySet은 CDC를 통해 이 변경을 감지하고 해당 캐시 엔트리만 업데이트하거나 무효화합니다. 이로 인해 애플리케이션은 항상 최신 데이터를 받아볼 수 있으며, 불필요한 전체 캐시 무효화를 방지하여 캐시 히트율을 높이고 성능 저하를 최소화합니다.  
       
    * 데이터 일관성 보장 
      * 이러한 실시간 CDC 처리 덕분에 애플리케이션은 항상 최신 데이터를 조회하는 것처럼 동작하지만, 실제로는 ReadySet 캐시에서 데이터를 받아오므로 데이터베이스에 직접 접근하는 것보다 훨씬 빠르게 응답합니다
      * 이는 복잡한 캐시 무효화 로직을 개발자가 직접 구현할 필요 없이 ReadySet이 자동으로 처리해주기 때문에 개발 편의성도 크게 향상시킵니다.

<br>

### 요약
* ReadySet은 애플리케이션과 데이터베이스 사이에 위치하여, 애플리케이션의 쿼리 요청을 가로챕니다.  
* 요청된 쿼리가 캐시되어 있다면 바로 캐시된 결과를 반환하고, 캐시되어 있지 않다면 데이터베이스로 쿼리를 전달한 후 그 결과를 캐시에 저장합니다.  
* 동시에 CDC를 통해 원본 데이터베이스의 변경 사항을 지속적으로 추적하며, 변경이 발생하면 관련 캐시를 자동으로 업데이트하거나 무효화하여 데이터 정합성을 보장합니다.

<br>

> ReadySet은 데이터베이스 성능 문제로 고민하는 개발자들에게 강력하고 효율적인 대안을 제시합니다. 별다른 코드 수정 없이 애플리케이션의 속도를 향상시키고 싶다면, ReadySet 도입을 고려해볼 가치가 충분합니다.

### 참고  
* https://readyset.io/docs  